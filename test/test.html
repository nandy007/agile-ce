<!-- HTML5文件 -->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <title>Agile CE</title>
    <script src="../dist/agile.ce.browser.js" charset="UTF-8"></script>
    <style>
        a{background: #ccc;}
        a.active{background: #ff0000;}
        .red{
            color: red;
        }
        .blue{
            color: blue;
        }
        .bg{
            background-color: blue;
        }
        .active:after{
            content: '--';
        }
    </style>
</head>

<body>
    <div id="app">

        <div v-for="item in arr" v-template="my"></div>
        
        
    </div>

    <script>
		$.vm.setVMPre({
            data: 'data',
            method: ''
        });

        $.template.setter('my', `
        <div><%=item.key%></div>
        `)


        var obj = {
            data: {
                aaa: 111,
                saveData: {
                   a:{},
                   b: {}
                },
                arr: [
                    
                ],
                str(s){
                    if(!s) return '';
                    return JSON.stringify(s);
                }
            }
        };
        

        var mv = $('#app').render(obj);

        // setTimeout(function(){
        //     obj.data.saveData.push({
        //         code: []
        //     });
        //     obj.data.arr.pop();
        //     obj.data.arr.push({
        //         t: 't4',
        //         v: '1'
        //     });
        // }, 1000);

        var aaa = {"msg":"成功","code":0,"data":{"necessaryRule":{"a10002":{"code":10002,"module":1,"btnType":2,"btn":"{\"key1\":\"2\"}","btnData":{"key1":"2"},"suggestion":"建议radiobutton11","reason":"原因radio11","picture":"2","ruleCode":"a10002","detail":{"reason":"原因radio11","suggestion":"建议radiobutton11","pic":["2"]}},"a10001":{"code":10001,"module":1,"btnType":1,"btn":"{\"key1\":[],\"key2\":[\"1\"],\"key3\":[]}","btnData":{"key1":[],"key2":["1"],"key3":[]},"suggestion":"","reason":"","picture":"","ruleCode":"a10001","detail":{"reason":"","suggestion":"","pic":[""]}}}}}
        var bbb = {"msg":"成功","code":0,"data":{"necessaryRule":{"a10002":{"code":10002,"module":1,"btnType":2,"btn":"{\"key1\":\"2\"}","btnData":{"key1":"2"},"suggestion":"建议radiobutton11","reason":"原因radio11","picture":"2","ruleCode":"a10002","detail":{"reason":"原因radio11","suggestion":"建议radiobutton11","pic":["2"]}},"a10001":{"code":10001,"module":1,"btnType":1,"btn":"{\"key1\":[\"1\"],\"key2\":[],\"key3\":[]}","btnData":{"key1":["1"],"key2":[],"key3":[]},"suggestion":"","reason":"","picture":"","ruleCode":"a10001","detail":{"reason":"","suggestion":"","pic":[""]}}}}}
        
        

        obj.data.saveData.a = {
            ...aaa.data.necessaryRule
        }

        obj.data.arr = [
            {
                "label": "111",
                "value": 1,
                "key": "key1"
            },
        ];

        setTimeout(()=>{
            obj.data.saveData.a = {...bbb.data.necessaryRule}
        }, 1000);
     

    </script>
</body>

</html>